> 7.15

## 存储与内存管理

### 作用域(scope)

块作用域：从定义处到所在块的结尾 在块中申明 在块中使用

```c
for (int i = 0; i < 10; i++)
printf("A C99 feature: i = %d", i);
//其中i的作用域仅限于for循环
```

函数原型作用域：函数形参申明时到函数申明结束为作用域

文件作用域(file scope)：从定义到文件结尾 也叫全局变量(global variable)

内部链接：该翻译单元也即该程序和包含文件 使用`static`

外部链接：在多文件程序中使用

### 存储期

静态存储期：文件作用域变量具有

线程存储期：多线程 备份

自动存储期：块作用域 自动分配自动释放

注意：对于局部变量，加上`static`可以延长为静态存储，也即一直存在，但作用域仍为块作用域。

#### 自动变量

关键词`auto`

#### 块作用域的静态变量

离开作用域不会消失

使用`static`表明静态存储期 在编译时已经被初始化过

#### 外部链接的静态变量

使用`extern`表示

如果使用到的变量定义在别的文件 则需要使用`extern`先申明再使用

### 随机数函数



## 栈(stack)

### 定义

在表尾（栈顶）插入删除 先入后出 后进先出

### 基本操作

1. `initstack()`初始化栈
2. `getlen()`求栈的长度
3. `gettop()`取栈顶元素

### 用途

有序的 可以节约空间 栈式管理

栈(stack)：由编译器自动分配，调用完毕立即释放

堆(heap)：由人工分配释放

### 表示和实现

#### 顺序存储

`s.top==0`表示空栈 下溢

`s.top==maxsize`表示栈满 上溢

#### 链栈结构

+ 栈顶在链头
+ 插入删除在栈顶处理
+ 空间可以随意扩充

#### 表达式求值

符号优先法